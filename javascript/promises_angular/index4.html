<!DOCTYPE html>
<html ng-app="testApp">
<head>
  <meta charset="UTF-8">
  <title>Test $http Promise Chain</title>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular.min.js"></script>
  <script src="main4.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    button { margin: 5px; padding: 8px 16px; cursor: pointer; }
    #log { margin-top: 20px; background: #f4f4f4; padding: 15px; border-radius: 4px; }
    .success { color: green; }
    .error   { color: red; }
    .info    { color: #555; }
  </style>
</head>
<body ng-controller="TestCtrl">
  <h2>Test catena $http promise</h2>

  <p>Simula quale chiamata fallisce (le API sono simulate con $timeout):</p>

  <button ng-click="runChain(0)">Nessun errore</button>
  <button ng-click="runChain(1)">Errore su API 1</button>
  <button ng-click="runChain(2)">Errore su API 2</button>
  <button ng-click="runChain(3)">Errore su API 3</button>
  <button ng-click="clearLog()">Pulisci log</button>

  <div id="log">
    <div ng-repeat="entry in logs" ng-class="entry.type">
      {{ entry.msg }}
    </div>
    <em ng-if="logs.length === 0">Premi un bottone per iniziare...</em>
  </div>
</body>
</html>
